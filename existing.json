{
    "spec": {
        "name": "ExistingVMBlueprint",
        "description": "Existing VM example",
        "resources": {
            "type": "USER",
            "service_definition_list": [
                {
                    "name": "MySQLService",
                    "description": "",
                    "port_list": [],
                    "singleton": false,
                    "tier": "",
                    "depends_on_list": [],
                    "variable_list": [
                        {
                            "name": "ENV",
                            "description": "",
                            "type": "LOCAL",
                            "label": "",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "DEV"
                        }
                    ],
                    "action_list": []
                },
                {
                    "name": "PHPService",
                    "description": "",
                    "port_list": [],
                    "singleton": false,
                    "tier": "",
                    "depends_on_list": [
                        {
                            "kind": "app_service",
                            "name": "MySQLService"
                        }
                    ],
                    "variable_list": [],
                    "action_list": [
                        {
                            "name": "Test Action",
                            "description": "",
                            "type": "user",
                            "critical": false,
                            "runbook": {
                                "name": "1e505fb1_runbook",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "4363ba7f_dag"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "4363ba7f_dag",
                                        "description": "",
                                        "type": "DAG",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "PHPService"
                                        },
                                        "attrs": {
                                            "edges": [
                                                {
                                                    "from_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "Task2"
                                                    },
                                                    "to_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "Task3"
                                                    }
                                                }
                                            ]
                                        },
                                        "child_tasks_local_reference_list": [
                                            {
                                                "kind": "app_task",
                                                "name": "Task2"
                                            },
                                            {
                                                "kind": "app_task",
                                                "name": "Task3"
                                            }
                                        ],
                                        "variable_list": []
                                    },
                                    {
                                        "name": "Task2",
                                        "description": "",
                                        "type": "EXEC",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "PHPService"
                                        },
                                        "attrs": {
                                            "script_type": "sh",
                                            "script": "echo \"Hello\"",
                                            "login_credential_local_reference": {
                                                "kind": "app_credential",
                                                "name": "default"
                                            }
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    },
                                    {
                                        "name": "Task3",
                                        "description": "",
                                        "type": "EXEC",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "PHPService"
                                        },
                                        "attrs": {
                                            "script_type": "sh",
                                            "script": "echo \"Hello again\"",
                                            "login_credential_local_reference": {
                                                "kind": "app_credential",
                                                "name": "default"
                                            }
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    }
                                ],
                                "variable_list": [
                                    {
                                        "name": "blah",
                                        "description": "",
                                        "type": "LOCAL",
                                        "label": "",
                                        "attrs": {},
                                        "val_type": "STRING",
                                        "value": "2"
                                    }
                                ]
                            }
                        }
                    ]
                }
            ],
            "package_definition_list": [
                {
                    "name": "MySQLPackage",
                    "description": "",
                    "type": "CUSTOM",
                    "options": {
                        "install_runbook": {
                            "name": "9dc57d80_runbook",
                            "description": "",
                            "main_task_local_reference": {
                                "kind": "app_task",
                                "name": "40445910_dag"
                            },
                            "task_definition_list": [
                                {
                                    "name": "40445910_dag",
                                    "description": "",
                                    "type": "DAG",
                                    "target_any_local_reference": {
                                        "kind": "app_package",
                                        "name": "MySQLPackage"
                                    },
                                    "attrs": {
                                        "edges": []
                                    },
                                    "child_tasks_local_reference_list": [
                                        {
                                            "kind": "app_task",
                                            "name": "Task1"
                                        }
                                    ],
                                    "variable_list": []
                                },
                                {
                                    "name": "Task1",
                                    "description": "",
                                    "type": "EXEC",
                                    "target_any_local_reference": {
                                        "kind": "app_service",
                                        "name": "MySQLService"
                                    },
                                    "attrs": {
                                        "script_type": "sh",
                                        "script": "echo @@{foo}@@",
                                        "login_credential_local_reference": {
                                            "kind": "app_credential",
                                            "name": "default"
                                        }
                                    },
                                    "child_tasks_local_reference_list": [],
                                    "variable_list": []
                                }
                            ],
                            "variable_list": []
                        },
                        "uninstall_runbook": {
                            "name": "Runbook_for_Package_MySQLPackage_action_uninstall",
                            "description": "",
                            "main_task_local_reference": {
                                "kind": "app_task",
                                "name": "DAG_Task_for_Package_MySQLPackage_action_uninstall"
                            },
                            "task_definition_list": [
                                {
                                    "name": "DAG_Task_for_Package_MySQLPackage_action_uninstall",
                                    "description": "",
                                    "type": "DAG",
                                    "target_any_local_reference": {
                                        "kind": "app_service",
                                        "name": "MySQLService"
                                    },
                                    "attrs": {
                                        "edges": []
                                    },
                                    "child_tasks_local_reference_list": [],
                                    "variable_list": []
                                }
                            ],
                            "variable_list": []
                        }
                    },
                    "service_local_reference_list": [
                        {
                            "kind": "app_service",
                            "name": "MySQLService"
                        }
                    ],
                    "variable_list": [
                        {
                            "name": "foo",
                            "description": "",
                            "type": "LOCAL",
                            "label": "",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "bar"
                        }
                    ]
                },
                {
                    "name": "PHPPackage",
                    "description": "",
                    "type": "CUSTOM",
                    "options": {
                        "install_runbook": {
                            "name": "b18009a0_runbook",
                            "description": "",
                            "main_task_local_reference": {
                                "kind": "app_task",
                                "name": "bc2b2fb0_dag"
                            },
                            "task_definition_list": [
                                {
                                    "name": "bc2b2fb0_dag",
                                    "description": "",
                                    "type": "DAG",
                                    "target_any_local_reference": {
                                        "kind": "app_package",
                                        "name": "PHPPackage"
                                    },
                                    "attrs": {
                                        "edges": []
                                    },
                                    "child_tasks_local_reference_list": [
                                        {
                                            "kind": "app_task",
                                            "name": "Task4"
                                        }
                                    ],
                                    "variable_list": []
                                },
                                {
                                    "name": "Task4",
                                    "description": "",
                                    "type": "EXEC",
                                    "target_any_local_reference": {
                                        "kind": "app_service",
                                        "name": "PHPService"
                                    },
                                    "attrs": {
                                        "script_type": "sh",
                                        "script": "echo @@{foo}@@",
                                        "login_credential_local_reference": {
                                            "kind": "app_credential",
                                            "name": "default"
                                        }
                                    },
                                    "child_tasks_local_reference_list": [],
                                    "variable_list": []
                                }
                            ],
                            "variable_list": []
                        },
                        "uninstall_runbook": {
                            "name": "Runbook_for_Package_PHPPackage_action_uninstall",
                            "description": "",
                            "main_task_local_reference": {
                                "kind": "app_task",
                                "name": "DAG_Task_for_Package_PHPPackage_action_uninstall"
                            },
                            "task_definition_list": [
                                {
                                    "name": "DAG_Task_for_Package_PHPPackage_action_uninstall",
                                    "description": "",
                                    "type": "DAG",
                                    "target_any_local_reference": {
                                        "kind": "app_service",
                                        "name": "PHPService"
                                    },
                                    "attrs": {
                                        "edges": []
                                    },
                                    "child_tasks_local_reference_list": [],
                                    "variable_list": []
                                }
                            ],
                            "variable_list": []
                        }
                    },
                    "service_local_reference_list": [
                        {
                            "kind": "app_service",
                            "name": "PHPService"
                        }
                    ],
                    "variable_list": [
                        {
                            "name": "foo",
                            "description": "",
                            "type": "LOCAL",
                            "label": "",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "baz"
                        }
                    ]
                }
            ],
            "substrate_definition_list": [
                {
                    "name": "ExistingVM",
                    "description": "CentOS VM",
                    "type": "EXISTING_VM",
                    "os_type": "Linux",
                    "create_spec": {
                        "address": "10.51.152.238"
                    },
                    "variable_list": [],
                    "action_list": [],
                    "readiness_probe": {
                        "address": "@@{ip_address}@@",
                        "login_credential_local_reference": {
                            "name": "default",
                            "kind": "app_credential"
                        },
                        "disable_readiness_probe": false,
                        "delay_secs": "0",
                        "connection_type": "SSH",
                        "connection_port": 22
                    }
                }
            ],
            "credential_definition_list": [
                {
                    "name": "default",
                    "description": "",
                    "type": "PASSWORD",
                    "username": "root",
                    "secret": {
                        "attrs": {
                            "is_secret_modified": true
                        },
                        "value": "***REMOVED***"
                    }
                }
            ],
            "app_profile_list": [
                {
                    "name": "DefaultProfile",
                    "deployment_create_list": [
                        {
                            "package_local_reference_list": [
                                {
                                    "kind": "app_package",
                                    "name": "MySQLPackage"
                                },
                                {
                                    "kind": "app_package",
                                    "name": "PHPPackage"
                                }
                            ],
                            "substrate_local_reference": {
                                "kind": "app_substrate",
                                "name": "ExistingVM"
                            },
                            "min_replicas": "1",
                            "max_replicas": "1",
                            "type": "GREENFIELD",
                            "name": "LampDeployment"
                        }
                    ],
                    "variable_list": [
                        {
                            "name": "nameserver",
                            "description": "",
                            "type": "LOCAL",
                            "label": "Local DNS resolver",
                            "attrs": {},
                            "val_type": "STRING",
                            "value": "10.40.64.15"
                        }
                    ],
                    "action_list": [
                        {
                            "name": "Test Profile Action",
                            "description": "",
                            "type": "user",
                            "critical": false,
                            "runbook": {
                                "name": "260f7584_runbook",
                                "description": "",
                                "main_task_local_reference": {
                                    "kind": "app_task",
                                    "name": "be14c5de_dag"
                                },
                                "task_definition_list": [
                                    {
                                        "name": "be14c5de_dag",
                                        "description": "",
                                        "type": "DAG",
                                        "attrs": {
                                            "edges": [
                                                {
                                                    "from_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "Task5"
                                                    },
                                                    "to_task_reference": {
                                                        "kind": "app_task",
                                                        "name": "Task6"
                                                    }
                                                }
                                            ]
                                        },
                                        "child_tasks_local_reference_list": [
                                            {
                                                "kind": "app_task",
                                                "name": "Task5"
                                            },
                                            {
                                                "kind": "app_task",
                                                "name": "Task6"
                                            }
                                        ],
                                        "variable_list": []
                                    },
                                    {
                                        "name": "Task5",
                                        "description": "",
                                        "type": "EXEC",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "MySQLService"
                                        },
                                        "attrs": {
                                            "script_type": "sh",
                                            "script": "echo \"Hello\"",
                                            "login_credential_local_reference": {
                                                "kind": "app_credential",
                                                "name": "default"
                                            }
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    },
                                    {
                                        "name": "Task6",
                                        "description": "",
                                        "type": "CALL_RUNBOOK",
                                        "target_any_local_reference": {
                                            "kind": "app_service",
                                            "name": "PHPService"
                                        },
                                        "attrs": {
                                            "runbook_reference": {
                                                "kind": "app_runbook",
                                                "name": "1e505fb1_runbook"
                                            }
                                        },
                                        "child_tasks_local_reference_list": [],
                                        "variable_list": []
                                    }
                                ],
                                "variable_list": []
                            }
                        }
                    ]
                }
            ],
            "client_attrs": {}
        }
    },
    "metadata": {
        "spec_version": 1,
        "name": "ExistingVMBlueprint",
        "kind": "blueprint"
    },
    "api_version": "3.0"
}
